# Copyright (c) Meta Platforms, Inc. and affiliates.
#
# This source code is licensed under the MIT license found in the
# LICENSE file in the root directory of this source tree.

# Auto-generated by quic/facebook/generate_cmake.py - DO NOT EDIT MANUALLY

mvfst_add_library(mvfst_server_handshake
  SRCS
    ServerHandshake.cpp
  DEPS
    mvfst_common_mvfst_logging
    mvfst_fizz_handshake_fizz_bridge
    mvfst_state_stream_functions
  EXPORTED_DEPS
    mvfst_constants
    mvfst_exception
    mvfst_handshake
    mvfst_server_handshake_app_token
    mvfst_server_handshake_server_extension
    mvfst_state_quic_state_machine
    fizz::fizz
    Folly::folly_io_async_delayed_destruction
    Folly::folly_io_iobuf
    Folly::folly_optional
)

mvfst_add_library(mvfst_server_handshake_server_extension
  EXPORTED_DEPS
    mvfst_fizz_handshake
    mvfst_server_handshake_stateless_reset_generator
    mvfst_state_quic_state_machine
    fizz::fizz
)

mvfst_add_library(mvfst_server_handshake_app_token
  SRCS
    AppToken.cpp
  EXPORTED_DEPS
    mvfst_common_expected
    mvfst_constants
    mvfst_exception
    mvfst_handshake_transport_parameters
)

mvfst_add_library(mvfst_server_handshake_default_app_token_validator
  SRCS
    DefaultAppTokenValidator.cpp
  DEPS
    mvfst_api_transport
    mvfst_api_transport_helpers
    mvfst_common_mvfst_logging
    mvfst_constants
    mvfst_fizz_server_handshake_handshake_app_token
    mvfst_handshake_transport_parameters
    mvfst_server_state_server
    fizz::fizz
    Folly::folly_network_address
  EXPORTED_DEPS
    mvfst_common_optional
    fizz::fizz
    Folly::folly_io_iobuf
)

mvfst_add_library(mvfst_server_handshake_stateless_reset_generator
  SRCS
    StatelessResetGenerator.cpp
  DEPS
    fizz::fizz
    Folly::folly_range
  EXPORTED_DEPS
    mvfst_codec_types
    fizz::fizz
)

mvfst_add_library(mvfst_server_handshake_token_generator
  SRCS
    TokenGenerator.cpp
  DEPS
    mvfst_codec_decode
    mvfst_common_mvfst_logging
    Folly::folly_range
  EXPORTED_DEPS
    mvfst_codec_types
    fizz::fizz
    Folly::folly_io_iobuf
)

add_subdirectory(test)
